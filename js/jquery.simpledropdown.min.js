/*
Name: jQuery Simple Drop Down Plugin
Author: Etienne Fardet
Version: 1.3
Comments: Packed version
*/
 
(function ($) {
	$.fn.simpledropdown = function(options) {

		var defaults = {
			speed : 300
		}
		var options = $.extend(defaults, options);

		var slideThis = function(elem, hauteur, opts) {
			elem.animate({
				height: hauteur
			}, opts.speed);
		}

		return this.each(function() {
		
			var $this	= $(this); 
			var opts	= options;
			$this.children("ul").addClass("dropdown");
			$this.find("ul.dropdown>li:first-child").addClass("selected");
			$this.find("ul.dropdown>li").not($this.find("ul.dropdown>li:first-child")).addClass("drop");
			var dropdownlist	= $this.find("ul.dropdown");
			var drop			= dropdownlist.find(".drop");
			var selected		= dropdownlist.find(".selected a");
			
			
			$this.prepend("<div class='mycorners1'></div>");
			drop.find("ul").append("<li class='mycorners2'></li>");
			$this.append("<div class='mycorners3'></div>");
			
			var coins1			= $this.find(".mycorners1");
			var coins2			= drop.find(".mycorners2");
			var coins3			= $this.find(".mycorners3");
			
			var b = ['TopLeft', 'TopMiddle', 'TopRight', 'VerticalLeft', 'Middle', 'VerticalRight'];
			var c = ['BottomLeft', 'BottomMiddle', 'BottomRight'];
			var d = ['BottomLeftSelected', 'BottomMiddleSelected', 'BottomRightSelected'];
			for (i in b) {
				e = $("<div/>").attr("class", b[i]);
				coins1.append(e)
			}
			for (i in c) {
				f = $("<div/>").attr("class", c[i]);
				coins2.append(f);
			}
			for (i in c) {
				f = $("<div/>").attr("class", c[i]);
				coins3.append(f);
			}
						
			var links = dropdownlist.find("li a");
			
			links.bind("click", function (e) {
				if (links.hasClass("no_event")) {
					return false;
				} else {
					dropdownlist.toggleClass("current");
					
					if (!dropdownlist.hasClass("current")) {
						slideThis(drop, 0, opts);
					} else {
						slideThis(drop, drop.find("ul").height()+6, opts);
					}
					
					var txt = $(this).text();
                    selected.text(txt).fadeOut(5, function () {
                        selected.fadeIn(400)
                    });
					
					if (!dropdownlist.hasClass("current")) {
						dropdownlist.removeClass("current")
					} else {
						dropdownlist.addClass("current")
					}
					dropdownlist.find(".current ul li:last-child").hover(function () {
						for (i in c) {
							dropdownlist.find(".current").parents("div").find("." + c[i]).toggleClass(d[i])
						}
					});	
				}
				e.preventDefault();
			});
		})
    };
})(jQuery);